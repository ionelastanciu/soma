<section class="card checkin-card fade-in">

  <h1>Check-in emocional</h1>

  <p class="intro-muted">
    <strong>Registro rápido</strong> de cómo te sientes en este momento.
  </p>

  <form #checkForm="ngForm" (ngSubmit)="registrar(checkForm)" class="form-card">

    <div class="field">
      <label class="label">¿Cómo te sientes ahora mismo?</label>

      <select
        [(ngModel)]="estadoActual"
        name="estado"
        required
        [ngClass]="{ 'input-error': mostrarError && !estadoActual }"
      >
        <option value="">Seleccionar estado…</option>
        <option *ngFor="let e of estados" [value]="e">{{ e }}</option>
      </select>

      <p class="error" *ngIf="mostrarError">
        Debes seleccionar al menos un estado.
      </p>
    </div>

    <div class="field">
      <label class="label">Mensaje corto (opcional)</label>
      <textarea
        [(ngModel)]="nota"
        name="nota"
        rows="2"
        placeholder="Ej: “Hoy me siento agobiada pero intentando estar tranquila”."
      ></textarea>
    </div>

    <button class="btn-submit">
      Registrar estado ✨
    </button>
  </form>

  <hr class="divider" />

  <h2 class="subtitulo">Tus últimos check-ins</h2>

  <p *ngIf="historial.length === 0" class="intro-muted">
    Aún no has registrado ningún estado.
  </p>

  <ul *ngIf="historial.length > 0" class="historial">
    <li *ngFor="let h of historial" class="historial-item">

      <div class="row">
        <span class="estado-pill">{{ h.estado }}</span>
        <span class="fecha">{{ h.fecha | date:'short' }}</span>
      </div>

      <p class="nota" *ngIf="h.nota">{{ h.nota }}</p>

    </li>
  </ul>

</section>

