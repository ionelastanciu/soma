<section class="card readings-card fade-in">

  <h1>Lecturas y citas</h1>
  <p class="muted">PequeÃ±os textos y frases para acompaÃ±ar tu estado emocional.</p>

  <div class="toolbar">
    <input
      type="text"
      [(ngModel)]="search"
      class="input-search"
      placeholder="Buscar por tÃ­tulo, autor o estadoâ€¦"
    />

    <span *ngIf="search" class="filter-label">
      Filtro activo: <strong>{{ search }}</strong>
    </span>
  </div>

  <p *ngIf="filteredReadings.length === 0" class="muted">
    No hay lecturas que coincidan con tu bÃºsqueda.
  </p>

  <ul class="reading-list" *ngIf="filteredReadings.length > 0">
    <li *ngFor="let r of filteredReadings" class="reading-row" [ngClass]="{ favored: r.favorited }">

      <div class="meta">
        <strong>{{ r.title }}</strong>
        <div class="sub">{{ r.author }} Â· {{ r.minutes }} min</div>
        <span class="chip">{{ r.moodTag }}</span>
      </div>

      <button class="fav-btn" (click)="toggleFavorite(r)">
        {{ r.favorited ? 'â˜… Favorito' : 'â˜† Guardar' }}
      </button>

    </li>
  </ul>

</section>

<section class="card readings-card fade-in">
  <h1>ðŸ“š Libros recomendados</h1>

  <p class="muted">Escribe algo para recibir sugerencias reales.</p>

  <div class="toolbar">
    <input
      type="text"
      [(ngModel)]="searchBooks"
      placeholder="Buscar libros..."
      class="input-search"
    />
    <button class="btn-primary" (click)="buscarLibros()">Buscar</button>
  </div>

  <p *ngIf="cargando">Buscando librosâ€¦</p>
  <p *ngIf="error" class="error">No se pudieron cargar libros.</p>

  <ul class="reading-list" *ngIf="libros.length > 0">
    <li *ngFor="let b of libros" class="reading-row">

      <div class="meta">
        <strong>{{ b.titulo }}</strong>
        <div class="sub">{{ b.autor }}</div>
      </div>

      <img *ngIf="b.portada" [src]="b.portada" class="book-cover" />

      <button class="fav-btn" (click)="guardarLibro(b)">â˜† Guardar</button>
    </li>
  </ul>

</section>
