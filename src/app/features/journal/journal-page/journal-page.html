<section class="card">
  <h1>Diario emocional</h1>
  <p class="muted">
    Escribe brevemente cómo te sientes hoy. No tiene que ser perfecto, solo honesto.
  </p>

  <form class="journal-form" (ngSubmit)="addEntry()" novalidate>
    <!-- ESTADO -->
    <div class="field">
      <label for="mood">Estado principal</label>
   <select
  id="mood"
  name="mood"
  [(ngModel)]="mood"
  required
  #moodCtrl="ngModel"
>

        <option value="">Seleccionar estado…</option>
        <option *ngFor="let m of moods" [value]="m">{{ m }}</option>
      </select>

      <small class="error" *ngIf="showErrors && !mood">
        Selecciona cómo te sientes.
      </small>
    </div>

    <!-- TEXTO -->
    <div class="field">
      <label for="text">Entrada del día</label>
   <textarea
  id="text"
  name="text"
  [(ngModel)]="text"
  required
  #textCtrl="ngModel"
></textarea>


      <small class="error" *ngIf="showErrors && !text.trim()">
        Escribe al menos una frase.
      </small>
    </div>

    <!-- BOTÓN SIEMPRE HABILITADO -->
    <button type="submit">
      Guardar entrada
    </button>
  </form>

  <!-- ENTRADAS VACÍAS -->
  <p class="muted" *ngIf="entries.length === 0">
    Aún no has escrito nada en tu diario. Tu primera entrada puede ser tan simple como:
    “Hoy he decidido empezar a escucharme”.
  </p>

  <!-- LISTADO -->
  <ul class="entries" *ngIf="entries.length > 0">
    <li *ngFor="let e of entries" [ngClass]="{ important: e.important }">
      <header class="entry-header">
        <div>
          <span class="date">{{ e.date | date: 'short' }}</span>
          <span class="mood-tag">{{ e.mood }}</span>
        </div>

        <div class="entry-actions">
          <button type="button" (click)="toggleImportant(e)">
            {{ e.important ? '★ Importante' : '☆ Marcar' }}
          </button>
          <button type="button" class="danger" (click)="removeEntry(e.id)">
            Eliminar
          </button>
        </div>
      </header>

      <p class="text">
        {{ e.text | shortText: 220 }}
      </p>
    </li>
  </ul>
</section>
