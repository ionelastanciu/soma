<section class="card journal-card">
  <h1>Diario emocional</h1>

  <p class="muted">
    Escribe con calma cÃ³mo te sientes hoy.
  </p>

  <form (ngSubmit)="addEntry()" class="journal-form">

    <div class="field">
      <label class="label">Estado principal de la entrada</label>

      <select
        [(ngModel)]="mood"
        name="mood"
        required
        [ngClass]="{ 'input-error': showErrors && !mood }"
      >
        <option value="">Seleccionar estadoâ€¦</option>
        <option *ngFor="let m of moods" [value]="m">{{ m }}</option>
      </select>

      <p class="error" *ngIf="showErrors && !mood">Selecciona un estado emocional.</p>
    </div>

    <div class="field">
      <label class="label">Entrada del dÃ­a</label>

      <textarea
        [(ngModel)]="text"
        name="text"
        rows="5"
        placeholder="Escribe lo que necesites..."
        [ngClass]="{ 'input-error': showErrors && !text.trim() }"
      ></textarea>

      <p class="error" *ngIf="showErrors && !text.trim()">
        Escribe algo para guardar la entrada.
      </p>
    </div>

    <button type="submit" class="btn-primary">
      Guardar entrada ğŸ“
    </button>

  </form>

  <hr class="divider" />

  <p class="muted" *ngIf="entries.length === 0">
    Tu diario estÃ¡ vacÃ­o.  
    Puedes comenzar con algo sencillo:  
    <em>â€œHoy he decidido escucharmeâ€.</em>
  </p>

  <ul class="journal-list" *ngIf="entries.length > 0">
    <li *ngFor="let entry of entries" [ngClass]="{ important: entry.important }" class="journal-item">

      <div class="journal-header">
        <span class="badge">{{ entry.mood }}</span>
        <span class="date">{{ entry.date | date:'short' }}</span>
      </div>

      <p class="journal-text">
        {{ entry.text | shortText:220 }}
      </p>

      <div class="actions">
        <button type="button" class="btn-secondary" (click)="toggleImportant(entry)">
          {{ entry.important ? 'Quitar destacado' : 'Marcar importante' }}
        </button>

        <button type="button" class="btn-danger" (click)="removeEntry(entry.id!)">
          Eliminar
        </button>
      </div>

    </li>
  </ul>
</section>
