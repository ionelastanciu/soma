<section class="card">
  <h1>Diario emocional</h1>

  <p class="muted">
    Puedes escribir con calma cÃ³mo te sientes y quÃ© ha pasado en tu dÃ­a.
  </p>

  <form (ngSubmit)="addEntry()">
    <div class="field">
      <label for="mood" class="label">Estado principal de la entrada</label>
      <select
        id="mood"
        name="mood"
        [(ngModel)]="mood"
        required
        #moodCtrl="ngModel"
        [ngClass]="{ 'input-error': showErrors && !mood }"
      >
        <option value="">Seleccionar estadoâ€¦</option>
        <option *ngFor="let m of moods" [value]="m">{{ m }}</option>
      </select>
      <p class="error" *ngIf="showErrors && !mood">
        Selecciona un estado para tu entrada.
      </p>
    </div>

    <div class="field">
      <label for="text" class="label">Entrada del dÃ­a</label>
      <textarea
        id="text"
        name="text"
        rows="5"
        [(ngModel)]="text"
        placeholder="Escribe lo que necesites: cÃ³mo te has sentido, quÃ© ha pasado, quÃ© quieres recordarteâ€¦"
        [ngClass]="{ 'input-error': showErrors && !text.trim() }"
      ></textarea>
      <p class="error" *ngIf="showErrors && !text.trim()">
        El diario necesita al menos unas lÃ­neas para guardar la entrada.
      </p>
    </div>

    <button type="submit" class="btn">
      Guardar entrada ğŸ“
    </button>
  </form>

  <hr class="divider" />

  <h2 class="subtitulo">Tus entradas recientes</h2>

  <p *ngIf="entries.length === 0" class="muted">
    AÃºn no has escrito nada en tu diario.  
    Tu primera entrada puede ser algo tan simple como:
    <em>â€œHoy he decidido empezar a escucharmeâ€.</em>
  </p>

  <ul class="journal-list" *ngIf="entries.length > 0">
    <li
      *ngFor="let entry of entries"
      [ngClass]="{ important: entry.important }"
    >
      <div class="journal-header">
        <span class="badge">{{ entry.mood }}</span>
        <span class="date">{{ entry.date | date: 'short' }}</span>
      </div>

      <p class="journal-text">
        {{ entry.text | shortText: 220 }}
      </p>

      <div class="actions">
        <button type="button" (click)="toggleImportant(entry)">
          {{ entry.important ? 'Quitar destacado' : 'Marcar como importante' }}
        </button>

        <button type="button" class="danger" (click)="removeEntry(entry.id)">
          Eliminar
        </button>
      </div>
    </li>
  </ul>
</section>
